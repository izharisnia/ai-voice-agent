<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‚ö° Electric Voice Agent</title>
  <link rel="stylesheet" href="/static/style.css" />
  <script src="https://unpkg.com/wavesurfer.js"></script>
</head>
<body>
  <div class="app-grid">
    <aside id="chatHistory" class="card sidebar">
      <div class="history-header">
        <h3>Conversations</h3>
        <div class="history-controls">
          <button id="newChatBtn" class="glow-button small">+ New Chat</button>
          <button id="clearHistoryBtn" class="glow-button small">Clear</button>
        </div>
      </div>
      <ul id="historyList" class="history-list"></ul>
    </aside>

    <main class="container">
      <section class="card glow-card agent-card">
        <h2>ü§ñ Conversational Voice Agent</h2>

        <div class="controls">
          <div class="record-row">
            <button id="recordToggleBtn" class="glow-button primary" aria-pressed="false">
              <span id="recordBtnLabel">Start Recording</span>
            </button>
            <div class="status-pill" id="statusText">
              <span class="status-dot idle"></span> Idle
            </div>
            <div class="settings">
              <button id="settingsBtn" class="glow-button small">‚öôÔ∏è Keys</button>
            </div>
          </div>
        </div>

        <div id="waveformEcho" class="waveform big"></div>

        <div class="llm-box">
          <div class="llm-header">üîä LLM Response:</div>
          <div id="skillResult" class="skill-result"></div>
          <audio id="llmAudioPlayer" controls style="display:block; margin-top:12px;"></audio>
        </div>
      </section>

      <section class="card glow-card transcription-card">
        <h2>üìù Transcription</h2>
        <div id="transcript" class="transcription-box">
          <p class="placeholder">Your transcription will appear here...</p>
        </div>
      </section>

      <footer>
        <p>Built by <strong>Isnia Izhar</strong> | #30DaysOfVoiceAgents</p>
      </footer>
    </main>
  </div>

  <!-- Settings modal (API keys) -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <h3>Configure API Keys</h3>
      <label>AssemblyAI Key<br><input id="cfg_assembly" type="text" /></label>
      <label>Gemini Key<br><input id="cfg_gemini" type="text" /></label>
      <label>Murf Key<br><input id="cfg_murf" type="text" /></label>
      <label>News API Key (optional)<br><input id="cfg_news" type="text" /></label>
      <div class="modal-actions">
        <button id="saveKeysBtn" class="glow-button small">Save</button>
        <button id="closeModalBtn" class="glow-button small">Close</button>
      </div>
    </div>
  </div>

  <script src="/static/scripts.js" defer></script>
</body>
</html>
